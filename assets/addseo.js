function run(){var e=document.querySelector("link[rel='canonical']").getAttribute("href");document.getElementById("pglink").innerHTML='<a href="https://pagespeed.web.dev/report?url='+e+'">See full results</a>';let t=setUpQuery(e);try{fetch(t).then(e=>e.json()).then(e=>{let t=e.lighthouseResult.categories;showMetric(100*t.performance.score,"p"),showMetric(100*t.accessibility.score,"a"),showMetric(100*t["best-practices"].score,"bp"),showMetric(100*t.seo.score,"s"),document.getElementById("loadingcard").classList.add("d-none"),document.getElementById("resultcard").classList.remove("d-none")})}catch{console.log("Error fetching url:"+t)}}function showMetric(e,t){let s="high";e<70?s="fail":e<86&&(s="mid");var r=document.getElementById(t+"_gauge");r.getElementsByClassName("base")[0].classList.add("base_"+s);var a=r.getElementsByClassName("arc")[0];a.classList.add("arc_"+s),a.setAttribute("stroke-dasharray",329*e/100+" 329");var l=r.getElementsByClassName("text")[0];l.classList.add("text_"+s),l.innerHTML=e}function setUpQuery(e){var t="https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url="+encodeURIComponent(e)+"&category=ACCESSIBILITY&category=BEST_PRACTICES&category=PERFORMANCE&category=SEO",t=t+"&key=AIzaSyC7unLuCp4eR9dL6YTVF17Quzxx0RC0aF8";return console.log("Querying "+t),t}run();